<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <title>Encriptador</title>
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
</head>

<body>
    <section>
        <div class="input">
            <div class="logo">
                <img src="imagenes/Logo.svg" alt="logo">
            </div>

            <div>
                <textarea cols="70" rows="10" id="mensaje" class="input-texto" required
                    placeholder="Ingrese el texto aquí"></textarea>
                <label for="mensaje"><img class="exclamacion" src="imagenes/Exclamacion.svg" alt="!"> Sólo letras
                    minúsculas y sin tilde</label>

                <fieldset>
                    <input type="submit" value="Encriptar" class="encriptar">
                    <input type="submit" value="Desencriptar" class="desencriptar">
                </fieldset>
            </div>
        </div>

        <div id="output" class="output">
            <div>
                <img id="munheco" src="imagenes/Muñeco.svg" alt="Muñeco">
                <h1 id="alerta" class="alerta">Ningún mensaje fue encontrado<h1>
                        <p id="textoEncriptado">Ingrese el texto que desees encriptar o desencriptar.</p>
            </div>
        </div>
    </section>

</body>

</html>

<script>
    function mostrarTexto() {
        document.getElementById('textoEncriptado').style.textAlign = 'left';
        document.getElementById('output').style.alignItems = 'flex-start';
        document.getElementById('munheco').style.display = 'none';
        document.getElementById('alerta').style.display = 'none';
    }
    function comprobarTexto(i) {
        var j = i.toLowerCase();
        if (j == "á" || j == "é" || j == "í" || j == "ó" || j == "ú" || i != j) {
            alert("Sin mayúsculas ni tildes por favor");
            return false;
        }
        return true;
    }
    var textoEncriptado;
    function encriptar() {
        var j = true;
        if (texto.value == "") {
            alert("Ingrese un texto");
        } else {
            textoEncriptado = "";
            for (let i = 0; i < texto.value.length; i++) {
                if (comprobarTexto(texto.value.substring(i, i + 1))) {
                    switch (texto.value.substring(i, i + 1)) {
                        case "a":
                            textoEncriptado += "ai";
                            break;
                        case "e":
                            textoEncriptado += "enter";
                            break;
                        case "i":
                            textoEncriptado += "imes";
                            break;
                        case "o":
                            textoEncriptado += "ober";
                            break;
                        case "u":
                            textoEncriptado += "ufat";
                            break;
                        default:
                            textoEncriptado += texto.value.substring(i, i + 1);
                            break;
                    }
                } else {
                    j = false;
                    break;
                }
            }
            if (j) {
                document.getElementById('textoEncriptado').innerHTML = textoEncriptado;
                mostrarTexto();
            }
        }
    }
    var textoDesencriptado;
    function desencriptar() {
        var j = true;
        if (texto.value == "") {
            alert("Ingrese un texto");
        } else {
            textoDesencriptado = "";
            for (let i = 0; i < texto.value.length; i++) {
                if (comprobarTexto(texto.value.substring(i, i + 1))) {
                    if (texto.value.substring(i, i + 2) == "ai") {
                        textoDesencriptado += "a";
                        i = i + 1;
                    } else if (texto.value.substring(i, i + 5) == "enter") {
                        textoDesencriptado += "e";
                        i = i + 4;
                    } else if (texto.value.substring(i, i + 4) == "imes") {
                        textoDesencriptado += "i";
                        i = i + 3;
                    } else if (texto.value.substring(i, i + 4) == "ober") {
                        textoDesencriptado += "o";
                        i = i + 3;
                    } else if (texto.value.substring(i, i + 4) == "ufat") {
                        textoDesencriptado += "u";
                        i = i + 3;
                    } else {
                        textoDesencriptado += texto.value.substring(i, i + 1);
                    }
                } else {
                    j = false;
                    break;
                }
            }
            if (j) {
                document.getElementById('textoEncriptado').innerHTML = textoDesencriptado;
                mostrarTexto();
            }
        }
    }

    var botonEncriptar = document.querySelector(".encriptar");
    botonEncriptar.onclick = encriptar;

    var botonDesencriptar = document.querySelector(".desencriptar");
    botonDesencriptar.onclick = desencriptar;

    var texto = document.querySelector("textarea");


</script>